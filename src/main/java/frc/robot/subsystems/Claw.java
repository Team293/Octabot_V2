package frc.robot.subsystems;

import com.ctre.phoenix.motorcontrol.ControlMode;
import com.ctre.phoenix.motorcontrol.TalonFXFeedbackDevice;
import com.ctre.phoenix.motorcontrol.can.WPI_TalonFX;
import edu.wpi.first.wpilibj2.command.SubsystemBase;

public class Claw extends SubsystemBase {
    /* Constants */
    public final int PID_CONFIG_TIMEOUT_MS = 10;
    public final int CLAW_TALON_FX_CAN_ID = 7;
    public final int CONFIG_CLAW_FEEDBACKSENSOR_TIMEOUT_MS = 4000;
    public final double CLOSE_CLAW = 0.0d;
    public final double OPEN_CLAW = 0.0d;
    private WPI_TalonFX clawTalonFX;
    public final double CLAW_OPEN_POSITION = 0.0d;
    public final double CLAW_CLOSE_POSITION = 640.0d;

    public Claw() {
        // BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=CONSTRUCTORS
        clawTalonFX = new WPI_TalonFX(CLAW_TALON_FX_CAN_ID);

        // Clears motor errors
        clawTalonFX.clearStickyFaults();

        // Set factory defaults for onboard PID
        clawTalonFX.configFactoryDefault();

        clawTalonFX.configSelectedFeedbackSensor(TalonFXFeedbackDevice.IntegratedSensor, 0,
                CONFIG_CLAW_FEEDBACKSENSOR_TIMEOUT_MS);

        clawTalonFX.setInverted(false);
        clawTalonFX.setSensorPhase(false);
    }

    public void moveClaw(double percentage) {
        clawTalonFX.set(ControlMode.Position, percentage);
    }

    public void openClaw(){
        
        clawTalonFX.set(0.3);

    }

    public void closeClaw(){
        clawTalonFX.set(-0.3);
    }

    public boolean isClosed(){
        return clawTalonFX.isFwdLimitSwitchClosed() == 1;
    }

    public boolean isOpen(){
        return clawTalonFX.isRevLimitSwitchClosed() == 1;
    }
}
